{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createBlock as _createBlock, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"scenario-detail\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"text-center my-5\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"alert alert-danger my-5\"\n};\nconst _hoisted_4 = {\n  key: 2,\n  class: \"alert alert-warning my-5\"\n};\nconst _hoisted_5 = {\n  key: 3\n};\nconst _hoisted_6 = {\n  class: \"d-flex justify-content-between align-items-center mb-4\"\n};\nconst _hoisted_7 = {\n  class: \"card mb-4\"\n};\nconst _hoisted_8 = {\n  class: \"card-body\"\n};\nconst _hoisted_9 = {\n  class: \"row\"\n};\nconst _hoisted_10 = {\n  class: \"col-md-6 mb-3\"\n};\nconst _hoisted_11 = {\n  class: \"col-md-6 mb-3\"\n};\nconst _hoisted_12 = {\n  class: \"row\"\n};\nconst _hoisted_13 = {\n  class: \"col-md-6 mb-3\"\n};\nconst _hoisted_14 = {\n  class: \"col-md-6 mb-3\"\n};\nconst _hoisted_15 = {\n  key: 0,\n  class: \"mt-3\"\n};\nconst _hoisted_16 = {\n  class: \"row\"\n};\nconst _hoisted_17 = {\n  key: 1,\n  class: \"mt-3\"\n};\nconst _hoisted_18 = {\n  class: \"row mb-4\"\n};\nconst _hoisted_19 = {\n  class: \"col-md-6\"\n};\nconst _hoisted_20 = {\n  class: \"card h-100\"\n};\nconst _hoisted_21 = {\n  class: \"card-body\"\n};\nconst _hoisted_22 = {\n  class: \"scenario-content\",\n  id: \"scenario-content\"\n};\nconst _hoisted_23 = [\"innerHTML\"];\nconst _hoisted_24 = {\n  class: \"col-md-6\"\n};\nconst _hoisted_25 = {\n  class: \"card h-100\"\n};\nconst _hoisted_26 = {\n  class: \"card-body\"\n};\nconst _hoisted_27 = {\n  key: 0,\n  class: \"scenario-conversation\",\n  id: \"scenario-conversation\"\n};\nconst _hoisted_28 = [\"innerHTML\"];\nconst _hoisted_29 = {\n  key: 1,\n  class: \"alert alert-warning\"\n};\nconst _hoisted_30 = {\n  key: 4,\n  class: \"modal fade show\",\n  tabindex: \"-1\",\n  style: {\n    \"display\": \"block\"\n  }\n};\nconst _hoisted_31 = {\n  class: \"modal-dialog\"\n};\nconst _hoisted_32 = {\n  class: \"modal-content\"\n};\nconst _hoisted_33 = {\n  class: \"modal-header bg-danger text-white\"\n};\nconst _hoisted_34 = {\n  class: \"modal-body\"\n};\nconst _hoisted_35 = {\n  class: \"modal-footer\"\n};\nconst _hoisted_36 = [\"disabled\"];\nconst _hoisted_37 = {\n  key: 0,\n  class: \"spinner-border spinner-border-sm me-2\",\n  role: \"status\",\n  \"aria-hidden\": \"true\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$options.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _cache[5] || (_cache[5] = [_createElementVNode(\"div\", {\n    class: \"spinner-border text-primary\",\n    role: \"status\"\n  }, [_createElementVNode(\"span\", {\n    class: \"visually-hidden\"\n  }, \"로딩 중...\")], -1 /* HOISTED */), _createElementVNode(\"p\", {\n    class: \"mt-3\"\n  }, \"시나리오를 불러오는 중입니다...\", -1 /* HOISTED */)]))) : _ctx.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString(_ctx.error), 1 /* TEXT */)) : !_ctx.currentScenario ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \" 시나리오를 찾을 수 없습니다. \")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"h1\", null, _toDisplayString(_ctx.currentScenario.title), 1 /* TEXT */), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    class: \"btn btn-success me-2\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.downloadPDF && $options.downloadPDF(...args))\n  }, _cache[6] || (_cache[6] = [_createElementVNode(\"i\", {\n    class: \"bi bi-file-earmark-pdf\"\n  }, null, -1 /* HOISTED */), _createTextVNode(\" PDF 다운로드 \")])), _createVNode(_component_router_link, {\n    to: {\n      name: 'ScenarioList'\n    },\n    class: \"btn btn-outline-secondary me-2\"\n  }, {\n    default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\" 목록으로 \")])),\n    _: 1 /* STABLE */\n  }), _ctx.isLoggedIn ? (_openBlock(), _createBlock(_component_router_link, {\n    key: 0,\n    to: {\n      name: 'ScenarioModify',\n      params: {\n        id: $props.id\n      }\n    },\n    class: \"btn btn-primary me-2\"\n  }, {\n    default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\" 시나리오 수정 \")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"to\"])) : _createCommentVNode(\"v-if\", true), _ctx.isLoggedIn ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    class: \"btn btn-danger\",\n    onClick: _cache[1] || (_cache[1] = $event => $data.showDeleteModal = true)\n  }, \" 시나리오 삭제 \")) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"div\", _hoisted_7, [_cache[15] || (_cache[15] = _createElementVNode(\"div\", {\n    class: \"card-header bg-primary text-white\"\n  }, [_createElementVNode(\"h2\", {\n    class: \"h5 mb-0\"\n  }, \"시나리오 정보\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_cache[9] || (_cache[9] = _createElementVNode(\"h3\", {\n    class: \"h6\"\n  }, \"주요 질병\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString(_ctx.currentScenario.main_disease), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_11, [_cache[10] || (_cache[10] = _createElementVNode(\"h3\", {\n    class: \"h6\"\n  }, \"작성자\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString(_ctx.currentScenario.created_by ? _ctx.currentScenario.created_by.username : '알 수 없음'), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_cache[11] || (_cache[11] = _createElementVNode(\"h3\", {\n    class: \"h6\"\n  }, \"생성일\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($options.formatDate(_ctx.currentScenario.created_at)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_14, [_cache[12] || (_cache[12] = _createElementVNode(\"h3\", {\n    class: \"h6\"\n  }, \"수정일\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($options.formatDate(_ctx.currentScenario.updated_at)), 1 /* TEXT */)])]), _ctx.currentScenario.personal_info ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [_cache[13] || (_cache[13] = _createElementVNode(\"h3\", {\n    class: \"h6\"\n  }, \"환자 정보\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_16, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.currentScenario.personal_info, (value, key) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: key,\n      class: \"col-md-4 mb-2\"\n    }, [_createElementVNode(\"strong\", null, _toDisplayString($options.formatKey(key)) + \":\", 1 /* TEXT */), _createTextVNode(\" \" + _toDisplayString($options.formatValue(value)), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true), _ctx.currentScenario.additional_info ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [_cache[14] || (_cache[14] = _createElementVNode(\"h3\", {\n    class: \"h6\"\n  }, \"기타 사항\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString(_ctx.currentScenario.additional_info), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_cache[16] || (_cache[16] = _createElementVNode(\"div\", {\n    class: \"card-header bg-primary text-white\"\n  }, [_createElementVNode(\"h2\", {\n    class: \"h5 mb-0\"\n  }, \"시나리오 내용\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_21, [_createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"div\", {\n    class: \"scenario-text\",\n    innerHTML: $options.formattedContent\n  }, null, 8 /* PROPS */, _hoisted_23)])])])]), _createElementVNode(\"div\", _hoisted_24, [_createElementVNode(\"div\", _hoisted_25, [_cache[17] || (_cache[17] = _createElementVNode(\"div\", {\n    class: \"card-header bg-primary text-white\"\n  }, [_createElementVNode(\"h2\", {\n    class: \"h5 mb-0\"\n  }, \"환자와의 대화\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_26, [$options.hasPatientConversation ? (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [_createElementVNode(\"div\", {\n    class: \"conversation-text\",\n    innerHTML: $options.formattedConversation\n  }, null, 8 /* PROPS */, _hoisted_28)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_29, \" 환자와의 대화 내용이 없습니다. \"))])])])])])), _createCommentVNode(\" 삭제 확인 모달 \"), $data.showDeleteModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [_createElementVNode(\"div\", _hoisted_31, [_createElementVNode(\"div\", _hoisted_32, [_createElementVNode(\"div\", _hoisted_33, [_cache[18] || (_cache[18] = _createElementVNode(\"h5\", {\n    class: \"modal-title\"\n  }, \"시나리오 삭제 확인\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn-close\",\n    onClick: _cache[2] || (_cache[2] = $event => $data.showDeleteModal = false)\n  })]), _createElementVNode(\"div\", _hoisted_34, [_createElementVNode(\"p\", null, \"'\" + _toDisplayString(_ctx.currentScenario?.title) + \"' 시나리오를 정말 삭제하시겠습니까?\", 1 /* TEXT */), _cache[19] || (_cache[19] = _createElementVNode(\"p\", {\n    class: \"text-danger\"\n  }, \"이 작업은 되돌릴 수 없습니다.\", -1 /* HOISTED */))]), _createElementVNode(\"div\", _hoisted_35, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-secondary\",\n    onClick: _cache[3] || (_cache[3] = $event => $data.showDeleteModal = false)\n  }, \"취소\"), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-danger\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.deleteScenario && $options.deleteScenario(...args)),\n    disabled: $data.deleting\n  }, [$data.deleting ? (_openBlock(), _createElementBlock(\"span\", _hoisted_37)) : _createCommentVNode(\"v-if\", true), _cache[20] || (_cache[20] = _createTextVNode(\" 삭제 \"))], 8 /* PROPS */, _hoisted_36)])])]), _cache[21] || (_cache[21] = _createElementVNode(\"div\", {\n    class: \"modal-backdrop fade show\"\n  }, null, -1 /* HOISTED */))])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","id","tabindex","style","role","_createElementBlock","_hoisted_1","$options","loading","_hoisted_2","_cache","_createElementVNode","_ctx","error","_hoisted_3","_toDisplayString","currentScenario","_hoisted_4","_hoisted_5","_hoisted_6","title","onClick","args","downloadPDF","_createTextVNode","_createVNode","_component_router_link","to","name","default","_withCtx","_","isLoggedIn","_createBlock","params","$props","_createCommentVNode","$event","$data","showDeleteModal","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","main_disease","_hoisted_11","created_by","username","_hoisted_12","_hoisted_13","formatDate","created_at","_hoisted_14","updated_at","personal_info","_hoisted_15","_hoisted_16","_Fragment","_renderList","value","formatKey","formatValue","additional_info","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","innerHTML","formattedContent","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","hasPatientConversation","_hoisted_27","formattedConversation","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","type","_hoisted_34","_hoisted_35","deleteScenario","disabled","deleting","_hoisted_37","_hoisted_36"],"sources":["D:\\간호시뮬레이션\\frontend\\src\\views\\ScenarioDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"scenario-detail\">\r\n    <div v-if=\"loading\" class=\"text-center my-5\">\r\n      <div class=\"spinner-border text-primary\" role=\"status\">\r\n        <span class=\"visually-hidden\">로딩 중...</span>\r\n      </div>\r\n      <p class=\"mt-3\">시나리오를 불러오는 중입니다...</p>\r\n    </div>\r\n    \r\n    <div v-else-if=\"error\" class=\"alert alert-danger my-5\">\r\n      {{ error }}\r\n    </div>\r\n    \r\n    <div v-else-if=\"!currentScenario\" class=\"alert alert-warning my-5\">\r\n      시나리오를 찾을 수 없습니다.\r\n    </div>\r\n    \r\n    <div v-else>\r\n      <div class=\"d-flex justify-content-between align-items-center mb-4\">\r\n        <h1>{{ currentScenario.title }}</h1>\r\n        <div>\r\n          <button class=\"btn btn-success me-2\" @click=\"downloadPDF\">\r\n            <i class=\"bi bi-file-earmark-pdf\"></i> PDF 다운로드\r\n          </button>\r\n          <router-link :to=\"{ name: 'ScenarioList' }\" class=\"btn btn-outline-secondary me-2\">\r\n            목록으로\r\n          </router-link>\r\n          <router-link \r\n            v-if=\"isLoggedIn\" \r\n            :to=\"{ name: 'ScenarioModify', params: { id } }\" \r\n            class=\"btn btn-primary me-2\"\r\n          >\r\n            시나리오 수정\r\n          </router-link>\r\n          <button \r\n            v-if=\"isLoggedIn\" \r\n            class=\"btn btn-danger\"\r\n            @click=\"showDeleteModal = true\"\r\n          >\r\n            시나리오 삭제\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"card mb-4\">\r\n        <div class=\"card-header bg-primary text-white\">\r\n          <h2 class=\"h5 mb-0\">시나리오 정보</h2>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-6 mb-3\">\r\n              <h3 class=\"h6\">주요 질병</h3>\r\n              <p>{{ currentScenario.main_disease }}</p>\r\n            </div>\r\n            \r\n            <div class=\"col-md-6 mb-3\">\r\n              <h3 class=\"h6\">작성자</h3>\r\n              <p>{{ currentScenario.created_by ? currentScenario.created_by.username : '알 수 없음' }}</p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"row\">\r\n            <div class=\"col-md-6 mb-3\">\r\n              <h3 class=\"h6\">생성일</h3>\r\n              <p>{{ formatDate(currentScenario.created_at) }}</p>\r\n            </div>\r\n            \r\n            <div class=\"col-md-6 mb-3\">\r\n              <h3 class=\"h6\">수정일</h3>\r\n              <p>{{ formatDate(currentScenario.updated_at) }}</p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div v-if=\"currentScenario.personal_info\" class=\"mt-3\">\r\n            <h3 class=\"h6\">환자 정보</h3>\r\n            <div class=\"row\">\r\n              <div v-for=\"(value, key) in currentScenario.personal_info\" :key=\"key\" class=\"col-md-4 mb-2\">\r\n                <strong>{{ formatKey(key) }}:</strong> {{ formatValue(value) }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div v-if=\"currentScenario.additional_info\" class=\"mt-3\">\r\n            <h3 class=\"h6\">기타 사항</h3>\r\n            <p>{{ currentScenario.additional_info }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"row mb-4\">\r\n        <div class=\"col-md-6\">\r\n          <div class=\"card h-100\">\r\n            <div class=\"card-header bg-primary text-white\">\r\n              <h2 class=\"h5 mb-0\">시나리오 내용</h2>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <div class=\"scenario-content\" id=\"scenario-content\">\r\n                <div class=\"scenario-text\" v-html=\"formattedContent\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"col-md-6\">\r\n          <div class=\"card h-100\">\r\n            <div class=\"card-header bg-primary text-white\">\r\n              <h2 class=\"h5 mb-0\">환자와의 대화</h2>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <div v-if=\"hasPatientConversation\" class=\"scenario-conversation\" id=\"scenario-conversation\">\r\n                <div class=\"conversation-text\" v-html=\"formattedConversation\"></div>\r\n              </div>\r\n              <div v-else class=\"alert alert-warning\">\r\n                환자와의 대화 내용이 없습니다.\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 삭제 확인 모달 -->\r\n    <div v-if=\"showDeleteModal\" class=\"modal fade show\" tabindex=\"-1\" style=\"display: block;\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header bg-danger text-white\">\r\n            <h5 class=\"modal-title\">시나리오 삭제 확인</h5>\r\n            <button type=\"button\" class=\"btn-close\" @click=\"showDeleteModal = false\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <p>'{{ currentScenario?.title }}' 시나리오를 정말 삭제하시겠습니까?</p>\r\n            <p class=\"text-danger\">이 작업은 되돌릴 수 없습니다.</p>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"showDeleteModal = false\">취소</button>\r\n            <button type=\"button\" class=\"btn btn-danger\" @click=\"deleteScenario\" :disabled=\"deleting\">\r\n              <span v-if=\"deleting\" class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n              삭제\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-backdrop fade show\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport html2pdf from 'html2pdf.js'\r\nimport { marked } from 'marked'\r\nimport { getCurrentInstance } from 'vue'\r\n\r\nexport default {\r\n  name: 'ScenarioDetail',\r\n  props: {\r\n    id: {\r\n      type: [String, Number],\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      showDeleteModal: false,\r\n      deleting: false\r\n    }\r\n  },\r\n  setup() {\r\n    const { proxy } = getCurrentInstance()\r\n    return { proxy }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['currentScenario', 'isLoading', 'error', 'isLoggedIn']),\r\n    loading() {\r\n      return this.isLoading\r\n    },\r\n    hasPatientConversation() {\r\n      return this.currentScenario && \r\n             this.currentScenario.patient_conversation && \r\n             this.currentScenario.patient_conversation.trim() !== ''\r\n    },\r\n    formattedContent() {\r\n      if (!this.currentScenario || !this.currentScenario.content) return ''\r\n      return marked(this.currentScenario.content)\r\n    },\r\n    formattedConversation() {\r\n      if (!this.hasPatientConversation) return ''\r\n      return marked(this.currentScenario.patient_conversation)\r\n    }\r\n  },\r\n  methods: {\r\n    formatKey(key) {\r\n      const keyMap = {\r\n        gender: '성별',\r\n        age: '나이',\r\n        medical_history: '과거력',\r\n        family_history: '가족력',\r\n        allergies: '알레르기',\r\n        vital_signs: '활력징후',\r\n        symptoms: '주요증상'\r\n      }\r\n      \r\n      return keyMap[key] || key\r\n    },\r\n    formatValue(value) {\r\n      if (Array.isArray(value)) {\r\n        return value.join(', ')\r\n      }\r\n      return value\r\n    },\r\n    formatDate(dateString) {\r\n      if (!dateString) return '알 수 없음'\r\n      \r\n      const date = new Date(dateString)\r\n      return new Intl.DateTimeFormat('ko-KR', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      }).format(date)\r\n    },\r\n    downloadPDF() {\r\n      // 로딩 메시지 설정\r\n      this.proxy.$mitt.emit('set-loading', [true, 'PDF 파일을 생성하는 중입니다. 잠시만 기다려주세요...']);\r\n      \r\n      // 현재 페이지의 내용을 복제하여 PDF 생성용 요소 생성\r\n      const element = document.createElement('div');\r\n      element.innerHTML = `\r\n        <div style=\"padding: 20px; font-family: 'Noto Sans KR', sans-serif;\">\r\n          <h1 style=\"text-align: center; margin-bottom: 20px;\">${this.currentScenario.title}</h1>\r\n          \r\n          <div style=\"margin-bottom: 20px;\">\r\n            <h2>시나리오 정보</h2>\r\n            <p><strong>주요 질병:</strong> ${this.currentScenario.main_disease}</p>\r\n            <p><strong>작성자:</strong> ${this.currentScenario.created_by ? this.currentScenario.created_by.username : '알 수 없음'}</p>\r\n            <p><strong>생성일:</strong> ${this.formatDate(this.currentScenario.created_at)}</p>\r\n            <p><strong>수정일:</strong> ${this.formatDate(this.currentScenario.updated_at)}</p>\r\n          </div>\r\n          \r\n          <div style=\"margin-bottom: 20px;\">\r\n            <h2>환자 정보</h2>\r\n            ${Object.entries(this.currentScenario.personal_info || {}).map(([key, value]) => \r\n              `<p><strong>${this.formatKey(key)}:</strong> ${this.formatValue(value)}</p>`\r\n            ).join('')}\r\n          </div>\r\n          \r\n          ${this.currentScenario.additional_info ? `\r\n            <div style=\"margin-bottom: 20px;\">\r\n              <h2>기타 사항</h2>\r\n              <p>${this.currentScenario.additional_info}</p>\r\n            </div>\r\n          ` : ''}\r\n          \r\n          <div style=\"margin-bottom: 20px;\">\r\n            <h2>시나리오 내용</h2>\r\n            <div>${this.formattedContent}</div>\r\n          </div>\r\n          \r\n          ${this.hasPatientConversation ? `\r\n            <div>\r\n              <h2>환자와의 대화</h2>\r\n              <div>${this.formattedConversation}</div>\r\n            </div>\r\n          ` : ''}\r\n        </div>\r\n      `;\r\n      \r\n      // PDF 옵션 설정\r\n      const options = {\r\n        margin: 10,\r\n        filename: `${this.currentScenario.title}_시나리오.pdf`,\r\n        image: { type: 'jpeg', quality: 0.98 },\r\n        html2canvas: { scale: 2 },\r\n        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }\r\n      };\r\n      \r\n      // PDF 생성 및 다운로드\r\n      html2pdf().from(element).set(options).save().then(() => {\r\n        // 로딩 메시지 해제\r\n        this.proxy.$mitt.emit('set-loading', [false, '']);\r\n      }).catch(error => {\r\n        console.error('PDF 생성 오류:', error);\r\n        // 로딩 메시지 해제\r\n        this.proxy.$mitt.emit('set-loading', [false, '']);\r\n      });\r\n    },\r\n    async deleteScenario() {\r\n      try {\r\n        this.deleting = true;\r\n        // 로딩 메시지 설정\r\n        this.proxy.$mitt.emit('set-loading', [true, '시나리오를 삭제하는 중입니다...']);\r\n        \r\n        await this.$store.dispatch('deleteScenario', this.id);\r\n        \r\n        // 로딩 메시지 해제\r\n        this.proxy.$mitt.emit('set-loading', [false, '']);\r\n        this.showDeleteModal = false;\r\n        \r\n        // 삭제 성공 후 목록 페이지로 이동\r\n        this.$router.push({ name: 'ScenarioList' });\r\n      } catch (error) {\r\n        console.error('시나리오 삭제 실패:', error);\r\n        // 로딩 메시지 해제\r\n        this.proxy.$mitt.emit('set-loading', [false, '']);\r\n        this.deleting = false;\r\n        alert('시나리오 삭제 중 오류가 발생했습니다: ' + error.message);\r\n      }\r\n    }\r\n  },\r\n  async created() {\r\n    // 시나리오 정보 로드\r\n    if (!this.currentScenario || this.currentScenario.id !== parseInt(this.id)) {\r\n      try {\r\n        // 로딩 메시지 설정\r\n        this.proxy.$mitt.emit('set-loading', [true, '시나리오를 불러오는 중입니다...']);\r\n        \r\n        await this.$store.dispatch('fetchScenario', this.id)\r\n        console.log('로드된 시나리오:', this.currentScenario)\r\n        \r\n        // 환자와의 대화 확인\r\n        if (this.currentScenario && !this.currentScenario.patient_conversation) {\r\n          console.warn('환자와의 대화가 없습니다.')\r\n        }\r\n        \r\n        // 로딩 메시지 해제\r\n        this.proxy.$mitt.emit('set-loading', [false, '']);\r\n      } catch (error) {\r\n        console.error('시나리오 로드 실패:', error)\r\n        // 로딩 메시지 해제\r\n        this.proxy.$mitt.emit('set-loading', [false, '']);\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.scenario-detail {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.scenario-content, .scenario-conversation {\r\n  background-color: #f8f9fa;\r\n  border-radius: 5px;\r\n  padding: 20px;\r\n  height: 100%;\r\n  min-height: 400px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.scenario-text, .conversation-text {\r\n  white-space: pre-wrap;\r\n  font-family: 'Noto Sans KR', sans-serif;\r\n}\r\n\r\n/* Markdown 스타일 */\r\n:deep(h1) {\r\n  font-size: 1.8rem;\r\n  margin-top: 1.5rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n:deep(h2) {\r\n  font-size: 1.5rem;\r\n  margin-top: 1.2rem;\r\n  margin-bottom: 0.8rem;\r\n}\r\n\r\n:deep(h3) {\r\n  font-size: 1.3rem;\r\n  margin-top: 1rem;\r\n  margin-bottom: 0.6rem;\r\n}\r\n\r\n:deep(ul), :deep(ol) {\r\n  padding-left: 1.5rem;\r\n}\r\n\r\n:deep(li) {\r\n  margin-bottom: 0.3rem;\r\n}\r\n\r\n:deep(p) {\r\n  margin-bottom: 0.8rem;\r\n}\r\n\r\n:deep(strong) {\r\n  font-weight: 600;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}