{"ast":null,"code":"import { mapGetters } from 'vuex';\nexport default {\n  name: 'ScenarioCreate',\n  data() {\n    return {\n      form: {\n        title: '',\n        main_disease: '',\n        personal_info: {\n          gender: '',\n          age: '',\n          medical_history: [],\n          medical_history_other: '',\n          family_history: [],\n          family_history_other: '',\n          allergies: [],\n          allergies_other: '',\n          vital_signs: '정상',\n          vital_signs_detail: '',\n          symptoms: [],\n          symptoms_other: ''\n        },\n        additional_info: ''\n      },\n      ageOptions: ['영아', '소아', '청소년', '성인', '노인'],\n      medicalHistoryOptions: ['고혈압', '당뇨', '심장질환', '기타'],\n      familyHistoryOptions: ['고혈압', '당뇨', '심장질환', '기타'],\n      allergyOptions: ['약물', '음식', '기타'],\n      symptomOptions: ['호흡곤란', '흉통', '발열', '기타']\n    };\n  },\n  computed: {\n    ...mapGetters(['isLoading', 'error'])\n  },\n  methods: {\n    async createScenario() {\n      try {\n        // 개인 정보 처리\n        const personalInfo = {\n          ...this.form.personal_info\n        };\n\n        // 기타 항목 처리\n        if (personalInfo.medical_history.includes('기타') && personalInfo.medical_history_other) {\n          personalInfo.medical_history = personalInfo.medical_history.filter(item => item !== '기타');\n          personalInfo.medical_history.push(personalInfo.medical_history_other);\n        }\n        if (personalInfo.family_history.includes('기타') && personalInfo.family_history_other) {\n          personalInfo.family_history = personalInfo.family_history.filter(item => item !== '기타');\n          personalInfo.family_history.push(personalInfo.family_history_other);\n        }\n        if (personalInfo.allergies.includes('기타') && personalInfo.allergies_other) {\n          personalInfo.allergies = personalInfo.allergies.filter(item => item !== '기타');\n          personalInfo.allergies.push(personalInfo.allergies_other);\n        }\n        if (personalInfo.symptoms.includes('기타') && personalInfo.symptoms_other) {\n          personalInfo.symptoms = personalInfo.symptoms.filter(item => item !== '기타');\n          personalInfo.symptoms.push(personalInfo.symptoms_other);\n        }\n\n        // 비정상 활력징후 처리\n        if (personalInfo.vital_signs === '비정상' && personalInfo.vital_signs_detail) {\n          personalInfo.vital_signs = `비정상(${personalInfo.vital_signs_detail})`;\n        }\n\n        // 불필요한 필드 제거\n        delete personalInfo.medical_history_other;\n        delete personalInfo.family_history_other;\n        delete personalInfo.allergies_other;\n        delete personalInfo.symptoms_other;\n        delete personalInfo.vital_signs_detail;\n\n        // 시나리오 생성 요청\n        const scenarioData = {\n          title: this.form.title,\n          main_disease: this.form.main_disease,\n          personal_info: personalInfo,\n          additional_info: this.form.additional_info\n        };\n        const response = await this.$store.dispatch('createScenario', scenarioData);\n\n        // 생성된 시나리오 페이지로 이동\n        this.$router.push({\n          name: 'ScenarioDetail',\n          params: {\n            id: response.id\n          }\n        });\n      } catch (error) {\n        console.error('시나리오 생성 실패:', error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","name","data","form","title","main_disease","personal_info","gender","age","medical_history","medical_history_other","family_history","family_history_other","allergies","allergies_other","vital_signs","vital_signs_detail","symptoms","symptoms_other","additional_info","ageOptions","medicalHistoryOptions","familyHistoryOptions","allergyOptions","symptomOptions","computed","methods","createScenario","personalInfo","includes","filter","item","push","scenarioData","response","$store","dispatch","$router","params","id","error","console"],"sources":["D:\\간호시뮬레이션\\frontend\\src\\views\\ScenarioCreate.vue"],"sourcesContent":["<template>\r\n  <div class=\"scenario-create\">\r\n    <h1 class=\"mb-4\">시나리오 생성</h1>\r\n    \r\n    <div v-if=\"error\" class=\"alert alert-danger\">\r\n      {{ error }}\r\n    </div>\r\n    \r\n    <form @submit.prevent=\"createScenario\" class=\"card\">\r\n      <div class=\"card-body\">\r\n        <div class=\"mb-3\">\r\n          <label for=\"title\" class=\"form-label\">시나리오명 *</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"title\" v-model=\"form.title\" required>\r\n        </div>\r\n        \r\n        <div class=\"mb-3\">\r\n          <label for=\"main_disease\" class=\"form-label\">주요 질병 *</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"main_disease\" v-model=\"form.main_disease\" required>\r\n        </div>\r\n        \r\n        <div class=\"mb-4\">\r\n          <label class=\"form-label\">기본 인적 사항</label>\r\n          \r\n          <div class=\"card mb-3\">\r\n            <div class=\"card-body\">\r\n              <h5 class=\"card-title\">성별</h5>\r\n              <div class=\"form-check form-check-inline\">\r\n                <input class=\"form-check-input\" type=\"radio\" name=\"gender\" id=\"gender-male\" value=\"남\" v-model=\"form.personal_info.gender\">\r\n                <label class=\"form-check-label\" for=\"gender-male\">남</label>\r\n              </div>\r\n              <div class=\"form-check form-check-inline\">\r\n                <input class=\"form-check-input\" type=\"radio\" name=\"gender\" id=\"gender-female\" value=\"여\" v-model=\"form.personal_info.gender\">\r\n                <label class=\"form-check-label\" for=\"gender-female\">여</label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"card mb-3\">\r\n            <div class=\"card-body\">\r\n              <h5 class=\"card-title\">나이</h5>\r\n              <div class=\"form-check form-check-inline\" v-for=\"(age, index) in ageOptions\" :key=\"index\">\r\n                <input class=\"form-check-input\" type=\"radio\" name=\"age\" :id=\"'age-' + index\" :value=\"age\" v-model=\"form.personal_info.age\">\r\n                <label class=\"form-check-label\" :for=\"'age-' + index\">{{ age }}</label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"card mb-3\">\r\n            <div class=\"card-body\">\r\n              <h5 class=\"card-title\">과거력</h5>\r\n              <div class=\"form-check\" v-for=\"(history, index) in medicalHistoryOptions\" :key=\"index\">\r\n                <input class=\"form-check-input\" type=\"checkbox\" :id=\"'history-' + index\" :value=\"history\" v-model=\"form.personal_info.medical_history\">\r\n                <label class=\"form-check-label\" :for=\"'history-' + index\">{{ history }}</label>\r\n              </div>\r\n              <div class=\"mt-2\" v-if=\"form.personal_info.medical_history.includes('기타')\">\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"기타 과거력을 입력하세요\" v-model=\"form.personal_info.medical_history_other\">\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"card mb-3\">\r\n            <div class=\"card-body\">\r\n              <h5 class=\"card-title\">가족력</h5>\r\n              <div class=\"form-check\" v-for=\"(history, index) in familyHistoryOptions\" :key=\"index\">\r\n                <input class=\"form-check-input\" type=\"checkbox\" :id=\"'family-' + index\" :value=\"history\" v-model=\"form.personal_info.family_history\">\r\n                <label class=\"form-check-label\" :for=\"'family-' + index\">{{ history }}</label>\r\n              </div>\r\n              <div class=\"mt-2\" v-if=\"form.personal_info.family_history.includes('기타')\">\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"기타 가족력을 입력하세요\" v-model=\"form.personal_info.family_history_other\">\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"card mb-3\">\r\n            <div class=\"card-body\">\r\n              <h5 class=\"card-title\">알레르기</h5>\r\n              <div class=\"form-check\" v-for=\"(allergy, index) in allergyOptions\" :key=\"index\">\r\n                <input class=\"form-check-input\" type=\"checkbox\" :id=\"'allergy-' + index\" :value=\"allergy\" v-model=\"form.personal_info.allergies\">\r\n                <label class=\"form-check-label\" :for=\"'allergy-' + index\">{{ allergy }}</label>\r\n              </div>\r\n              <div class=\"mt-2\" v-if=\"form.personal_info.allergies.includes('기타')\">\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"기타 알레르기를 입력하세요\" v-model=\"form.personal_info.allergies_other\">\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"card mb-3\">\r\n            <div class=\"card-body\">\r\n              <h5 class=\"card-title\">활력징후</h5>\r\n              <div class=\"form-check form-check-inline\">\r\n                <input class=\"form-check-input\" type=\"radio\" name=\"vital_signs\" id=\"vital-normal\" value=\"정상\" v-model=\"form.personal_info.vital_signs\">\r\n                <label class=\"form-check-label\" for=\"vital-normal\">정상</label>\r\n              </div>\r\n              <div class=\"form-check form-check-inline\">\r\n                <input class=\"form-check-input\" type=\"radio\" name=\"vital_signs\" id=\"vital-abnormal\" value=\"비정상\" v-model=\"form.personal_info.vital_signs\">\r\n                <label class=\"form-check-label\" for=\"vital-abnormal\">비정상</label>\r\n              </div>\r\n              <div class=\"mt-2\" v-if=\"form.personal_info.vital_signs === '비정상'\">\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"비정상 활력징후를 입력하세요\" v-model=\"form.personal_info.vital_signs_detail\">\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"card mb-3\">\r\n            <div class=\"card-body\">\r\n              <h5 class=\"card-title\">주요증상</h5>\r\n              <div class=\"form-check\" v-for=\"(symptom, index) in symptomOptions\" :key=\"index\">\r\n                <input class=\"form-check-input\" type=\"checkbox\" :id=\"'symptom-' + index\" :value=\"symptom\" v-model=\"form.personal_info.symptoms\">\r\n                <label class=\"form-check-label\" :for=\"'symptom-' + index\">{{ symptom }}</label>\r\n              </div>\r\n              <div class=\"mt-2\" v-if=\"form.personal_info.symptoms.includes('기타')\">\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"기타 증상을 입력하세요\" v-model=\"form.personal_info.symptoms_other\">\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"mb-3\">\r\n          <label for=\"additional_info\" class=\"form-label\">기타 사항</label>\r\n          <textarea class=\"form-control\" id=\"additional_info\" rows=\"5\" v-model=\"form.additional_info\" placeholder=\"환자의 상태, 상황 등 추가 정보를 입력하세요\"></textarea>\r\n        </div>\r\n        \r\n        <div class=\"d-grid\">\r\n          <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"loading\">\r\n            <span v-if=\"loading\" class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n            시나리오 생성\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  name: 'ScenarioCreate',\r\n  data() {\r\n    return {\r\n      form: {\r\n        title: '',\r\n        main_disease: '',\r\n        personal_info: {\r\n          gender: '',\r\n          age: '',\r\n          medical_history: [],\r\n          medical_history_other: '',\r\n          family_history: [],\r\n          family_history_other: '',\r\n          allergies: [],\r\n          allergies_other: '',\r\n          vital_signs: '정상',\r\n          vital_signs_detail: '',\r\n          symptoms: [],\r\n          symptoms_other: ''\r\n        },\r\n        additional_info: ''\r\n      },\r\n      ageOptions: ['영아', '소아', '청소년', '성인', '노인'],\r\n      medicalHistoryOptions: ['고혈압', '당뇨', '심장질환', '기타'],\r\n      familyHistoryOptions: ['고혈압', '당뇨', '심장질환', '기타'],\r\n      allergyOptions: ['약물', '음식', '기타'],\r\n      symptomOptions: ['호흡곤란', '흉통', '발열', '기타']\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['isLoading', 'error'])\r\n  },\r\n  methods: {\r\n    async createScenario() {\r\n      try {\r\n        // 개인 정보 처리\r\n        const personalInfo = { ...this.form.personal_info }\r\n        \r\n        // 기타 항목 처리\r\n        if (personalInfo.medical_history.includes('기타') && personalInfo.medical_history_other) {\r\n          personalInfo.medical_history = personalInfo.medical_history.filter(item => item !== '기타')\r\n          personalInfo.medical_history.push(personalInfo.medical_history_other)\r\n        }\r\n        \r\n        if (personalInfo.family_history.includes('기타') && personalInfo.family_history_other) {\r\n          personalInfo.family_history = personalInfo.family_history.filter(item => item !== '기타')\r\n          personalInfo.family_history.push(personalInfo.family_history_other)\r\n        }\r\n        \r\n        if (personalInfo.allergies.includes('기타') && personalInfo.allergies_other) {\r\n          personalInfo.allergies = personalInfo.allergies.filter(item => item !== '기타')\r\n          personalInfo.allergies.push(personalInfo.allergies_other)\r\n        }\r\n        \r\n        if (personalInfo.symptoms.includes('기타') && personalInfo.symptoms_other) {\r\n          personalInfo.symptoms = personalInfo.symptoms.filter(item => item !== '기타')\r\n          personalInfo.symptoms.push(personalInfo.symptoms_other)\r\n        }\r\n        \r\n        // 비정상 활력징후 처리\r\n        if (personalInfo.vital_signs === '비정상' && personalInfo.vital_signs_detail) {\r\n          personalInfo.vital_signs = `비정상(${personalInfo.vital_signs_detail})`\r\n        }\r\n        \r\n        // 불필요한 필드 제거\r\n        delete personalInfo.medical_history_other\r\n        delete personalInfo.family_history_other\r\n        delete personalInfo.allergies_other\r\n        delete personalInfo.symptoms_other\r\n        delete personalInfo.vital_signs_detail\r\n        \r\n        // 시나리오 생성 요청\r\n        const scenarioData = {\r\n          title: this.form.title,\r\n          main_disease: this.form.main_disease,\r\n          personal_info: personalInfo,\r\n          additional_info: this.form.additional_info\r\n        }\r\n        \r\n        const response = await this.$store.dispatch('createScenario', scenarioData)\r\n        \r\n        // 생성된 시나리오 페이지로 이동\r\n        this.$router.push({ name: 'ScenarioDetail', params: { id: response.id } })\r\n      } catch (error) {\r\n        console.error('시나리오 생성 실패:', error)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.scenario-create {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.card {\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.card-title {\r\n  font-size: 1.1rem;\r\n  font-weight: 500;\r\n  margin-bottom: 1rem;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}